<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_zwnr13ed57h-1{list-style-type:none}ul.lst-kix_zwnr13ed57h-2{list-style-type:none}.lst-kix_45dr24g7kxmp-8>li:before{content:"\0025a0   "}ul.lst-kix_zwnr13ed57h-3{list-style-type:none}ul.lst-kix_zwnr13ed57h-4{list-style-type:none}.lst-kix_5b8f5ucvcrgs-0>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-0,decimal) ". "}.lst-kix_45dr24g7kxmp-6>li:before{content:"\0025cf   "}ul.lst-kix_zwnr13ed57h-0{list-style-type:none}.lst-kix_5b8f5ucvcrgs-1>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-1,lower-latin) ". "}ol.lst-kix_6z8bqu9yyhkx-1.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-1 0}ul.lst-kix_yl0inrclg1lv-8{list-style-type:none}ul.lst-kix_yl0inrclg1lv-5{list-style-type:none}ul.lst-kix_yl0inrclg1lv-4{list-style-type:none}.lst-kix_45dr24g7kxmp-7>li:before{content:"\0025cb   "}ul.lst-kix_yl0inrclg1lv-7{list-style-type:none}ul.lst-kix_yl0inrclg1lv-6{list-style-type:none}.lst-kix_5b8f5ucvcrgs-7>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-7,lower-latin) ". "}ul.lst-kix_yl0inrclg1lv-1{list-style-type:none}ul.lst-kix_yl0inrclg1lv-0{list-style-type:none}ul.lst-kix_yl0inrclg1lv-3{list-style-type:none}ul.lst-kix_yl0inrclg1lv-2{list-style-type:none}.lst-kix_5b8f5ucvcrgs-8>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-8,lower-roman) ". "}.lst-kix_5b8f5ucvcrgs-1>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-1}ul.lst-kix_zwnr13ed57h-5{list-style-type:none}ul.lst-kix_zwnr13ed57h-6{list-style-type:none}ul.lst-kix_zwnr13ed57h-7{list-style-type:none}ul.lst-kix_zwnr13ed57h-8{list-style-type:none}.lst-kix_6z8bqu9yyhkx-1>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-1}ul.lst-kix_wwkto3yjhp6t-8{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-7{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-6{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-5{list-style-type:none}.lst-kix_5b8f5ucvcrgs-6>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-6,decimal) ". "}.lst-kix_5b8f5ucvcrgs-5>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-5,lower-roman) ". "}ul.lst-kix_wwkto3yjhp6t-0{list-style-type:none}.lst-kix_5b8f5ucvcrgs-2>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-2,lower-roman) ". "}.lst-kix_5b8f5ucvcrgs-4>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-4,lower-latin) ". "}ol.lst-kix_6z8bqu9yyhkx-6.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-6 0}ul.lst-kix_wwkto3yjhp6t-4{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-3{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-2{list-style-type:none}ul.lst-kix_wwkto3yjhp6t-1{list-style-type:none}.lst-kix_5b8f5ucvcrgs-3>li:before{content:"" counter(lst-ctn-kix_5b8f5ucvcrgs-3,decimal) ". "}ol.lst-kix_5b8f5ucvcrgs-5.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-5 0}.lst-kix_qmsy8kjx5o6k-0>li:before{content:"\0025cf   "}.lst-kix_qmsy8kjx5o6k-2>li:before{content:"\0025a0   "}.lst-kix_xroe97zhbgxz-8>li:before{content:"\0025a0   "}.lst-kix_qmsy8kjx5o6k-1>li:before{content:"\0025cb   "}.lst-kix_qmsy8kjx5o6k-3>li:before{content:"\0025cf   "}.lst-kix_qmsy8kjx5o6k-6>li:before{content:"\0025cf   "}.lst-kix_vco46nff9ran-0>li:before{content:"\0025cf   "}.lst-kix_xroe97zhbgxz-4>li:before{content:"\0025cb   "}.lst-kix_xroe97zhbgxz-5>li:before{content:"\0025a0   "}.lst-kix_qmsy8kjx5o6k-5>li:before{content:"\0025a0   "}.lst-kix_qmsy8kjx5o6k-7>li:before{content:"\0025cb   "}.lst-kix_qmsy8kjx5o6k-4>li:before{content:"\0025cb   "}.lst-kix_qmsy8kjx5o6k-8>li:before{content:"\0025a0   "}.lst-kix_vco46nff9ran-1>li:before{content:"\0025cb   "}.lst-kix_vco46nff9ran-2>li:before{content:"\0025a0   "}.lst-kix_xroe97zhbgxz-3>li:before{content:"\0025cf   "}.lst-kix_xroe97zhbgxz-6>li:before{content:"\0025cf   "}.lst-kix_xroe97zhbgxz-7>li:before{content:"\0025cb   "}.lst-kix_vco46nff9ran-3>li:before{content:"\0025cf   "}.lst-kix_vco46nff9ran-4>li:before{content:"\0025cb   "}ol.lst-kix_6z8bqu9yyhkx-2.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-2 0}.lst-kix_6z8bqu9yyhkx-8>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-8}.lst-kix_vco46nff9ran-7>li:before{content:"\0025cb   "}.lst-kix_vco46nff9ran-6>li:before{content:"\0025cf   "}.lst-kix_vco46nff9ran-8>li:before{content:"\0025a0   "}ol.lst-kix_6z8bqu9yyhkx-7.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-7 0}.lst-kix_vco46nff9ran-5>li:before{content:"\0025a0   "}.lst-kix_5b8f5ucvcrgs-3>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-3}ol.lst-kix_5b8f5ucvcrgs-4.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-4 0}.lst-kix_45dr24g7kxmp-0>li:before{content:"\0025cf   "}.lst-kix_45dr24g7kxmp-1>li:before{content:"\0025cb   "}.lst-kix_45dr24g7kxmp-2>li:before{content:"\0025a0   "}.lst-kix_45dr24g7kxmp-4>li:before{content:"\0025cb   "}.lst-kix_45dr24g7kxmp-5>li:before{content:"\0025a0   "}.lst-kix_45dr24g7kxmp-3>li:before{content:"\0025cf   "}.lst-kix_tks9ztgo6jqs-5>li:before{content:"\0025a0   "}.lst-kix_5b8f5ucvcrgs-8>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-8}ol.lst-kix_6z8bqu9yyhkx-8.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-8 0}.lst-kix_6z8bqu9yyhkx-5>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-5}.lst-kix_tks9ztgo6jqs-3>li:before{content:"\0025cf   "}.lst-kix_tks9ztgo6jqs-7>li:before{content:"\0025cb   "}.lst-kix_5b8f5ucvcrgs-7>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-7}ol.lst-kix_5b8f5ucvcrgs-6.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-6 0}.lst-kix_6z8bqu9yyhkx-5>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-5,lower-roman) ". "}.lst-kix_xroe97zhbgxz-0>li:before{content:"\0025cf   "}.lst-kix_xroe97zhbgxz-2>li:before{content:"\0025a0   "}.lst-kix_6z8bqu9yyhkx-7>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-7,lower-latin) ". "}.lst-kix_6z8bqu9yyhkx-7>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-7}ol.lst-kix_6z8bqu9yyhkx-0.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-0 0}.lst-kix_zwnr13ed57h-7>li:before{content:"\0025cb   "}ol.lst-kix_6z8bqu9yyhkx-6{list-style-type:none}.lst-kix_zwnr13ed57h-1>li:before{content:"\0025cb   "}ol.lst-kix_6z8bqu9yyhkx-5{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-8{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-7{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-2{list-style-type:none}.lst-kix_zwnr13ed57h-3>li:before{content:"\0025cf   "}ol.lst-kix_6z8bqu9yyhkx-1{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-4{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-3{list-style-type:none}.lst-kix_wwkto3yjhp6t-8>li:before{content:"\0025a0   "}.lst-kix_zwnr13ed57h-5>li:before{content:"\0025a0   "}ol.lst-kix_6z8bqu9yyhkx-0{list-style-type:none}.lst-kix_wwkto3yjhp6t-4>li:before{content:"\0025cb   "}.lst-kix_wwkto3yjhp6t-2>li:before{content:"\0025a0   "}.lst-kix_wwkto3yjhp6t-6>li:before{content:"\0025cf   "}ol.lst-kix_5b8f5ucvcrgs-8.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-8 0}.lst-kix_6z8bqu9yyhkx-3>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-3,decimal) ". "}ul.lst-kix_qmsy8kjx5o6k-0{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-1{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-2{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-3{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-4{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-5{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-6{list-style-type:none}.lst-kix_6z8bqu9yyhkx-1>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-1,lower-latin) ". "}.lst-kix_wwkto3yjhp6t-0>li:before{content:"\0025cf   "}ul.lst-kix_qmsy8kjx5o6k-7{list-style-type:none}ul.lst-kix_qmsy8kjx5o6k-8{list-style-type:none}.lst-kix_6z8bqu9yyhkx-0>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-0}.lst-kix_6z8bqu9yyhkx-6>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-6}ol.lst-kix_5b8f5ucvcrgs-7.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-7 0}.lst-kix_tks9ztgo6jqs-1>li:before{content:"\0025cb   "}ul.lst-kix_vco46nff9ran-4{list-style-type:none}ul.lst-kix_vco46nff9ran-3{list-style-type:none}.lst-kix_5b8f5ucvcrgs-2>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-2}ul.lst-kix_vco46nff9ran-2{list-style-type:none}.lst-kix_q7jh53poj1ub-1>li:before{content:"\0025cb   "}.lst-kix_q7jh53poj1ub-3>li:before{content:"\0025cf   "}ul.lst-kix_vco46nff9ran-1{list-style-type:none}ul.lst-kix_vco46nff9ran-8{list-style-type:none}ul.lst-kix_vco46nff9ran-7{list-style-type:none}ul.lst-kix_vco46nff9ran-6{list-style-type:none}.lst-kix_q7jh53poj1ub-0>li:before{content:"\0025cf   "}.lst-kix_q7jh53poj1ub-4>li:before{content:"\0025cb   "}ul.lst-kix_vco46nff9ran-5{list-style-type:none}.lst-kix_q7jh53poj1ub-2>li:before{content:"\0025a0   "}ol.lst-kix_6z8bqu9yyhkx-4.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-4 0}.lst-kix_q7jh53poj1ub-8>li:before{content:"\0025a0   "}.lst-kix_q7jh53poj1ub-5>li:before{content:"\0025a0   "}.lst-kix_q7jh53poj1ub-7>li:before{content:"\0025cb   "}ul.lst-kix_vco46nff9ran-0{list-style-type:none}.lst-kix_q7jh53poj1ub-6>li:before{content:"\0025cf   "}ul.lst-kix_tks9ztgo6jqs-7{list-style-type:none}.lst-kix_67keqmx6big9-6>li:before{content:"\0025cf   "}ul.lst-kix_tks9ztgo6jqs-6{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-5{list-style-type:none}.lst-kix_67keqmx6big9-5>li:before{content:"\0025a0   "}.lst-kix_67keqmx6big9-7>li:before{content:"\0025cb   "}ul.lst-kix_tks9ztgo6jqs-4{list-style-type:none}ul.lst-kix_45dr24g7kxmp-8{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-8{list-style-type:none}ul.lst-kix_45dr24g7kxmp-5{list-style-type:none}ul.lst-kix_45dr24g7kxmp-4{list-style-type:none}ul.lst-kix_45dr24g7kxmp-7{list-style-type:none}ul.lst-kix_45dr24g7kxmp-6{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-3{list-style-type:none}.lst-kix_67keqmx6big9-8>li:before{content:"\0025a0   "}ul.lst-kix_45dr24g7kxmp-1{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-2{list-style-type:none}ul.lst-kix_45dr24g7kxmp-0{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-1{list-style-type:none}ul.lst-kix_45dr24g7kxmp-3{list-style-type:none}ul.lst-kix_tks9ztgo6jqs-0{list-style-type:none}ul.lst-kix_45dr24g7kxmp-2{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-2.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-2 0}ul.lst-kix_q7jh53poj1ub-8{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-0{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-1{list-style-type:none}ul.lst-kix_q7jh53poj1ub-4{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-4{list-style-type:none}ul.lst-kix_q7jh53poj1ub-5{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-5{list-style-type:none}ul.lst-kix_q7jh53poj1ub-6{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-2{list-style-type:none}ul.lst-kix_q7jh53poj1ub-7{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-3{list-style-type:none}ul.lst-kix_q7jh53poj1ub-0{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-8{list-style-type:none}ul.lst-kix_q7jh53poj1ub-1{list-style-type:none}ul.lst-kix_q7jh53poj1ub-2{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-6{list-style-type:none}ul.lst-kix_q7jh53poj1ub-3{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-7{list-style-type:none}.lst-kix_6z8bqu9yyhkx-2>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-2}.lst-kix_yl0inrclg1lv-3>li:before{content:"\0025cf   "}.lst-kix_yl0inrclg1lv-4>li:before{content:"\0025cb   "}ul.lst-kix_xroe97zhbgxz-3{list-style-type:none}ul.lst-kix_xroe97zhbgxz-2{list-style-type:none}ul.lst-kix_xroe97zhbgxz-5{list-style-type:none}ul.lst-kix_xroe97zhbgxz-4{list-style-type:none}.lst-kix_yl0inrclg1lv-6>li:before{content:"\0025cf   "}.lst-kix_5b8f5ucvcrgs-0>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-0}.lst-kix_yl0inrclg1lv-5>li:before{content:"\0025a0   "}ul.lst-kix_xroe97zhbgxz-1{list-style-type:none}ul.lst-kix_xroe97zhbgxz-0{list-style-type:none}.lst-kix_yl0inrclg1lv-8>li:before{content:"\0025a0   "}.lst-kix_67keqmx6big9-2>li:before{content:"\0025a0   "}.lst-kix_67keqmx6big9-3>li:before{content:"\0025cf   "}.lst-kix_67keqmx6big9-4>li:before{content:"\0025cb   "}ul.lst-kix_xroe97zhbgxz-7{list-style-type:none}ul.lst-kix_xroe97zhbgxz-6{list-style-type:none}.lst-kix_yl0inrclg1lv-7>li:before{content:"\0025cb   "}ul.lst-kix_xroe97zhbgxz-8{list-style-type:none}.lst-kix_5b8f5ucvcrgs-6>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-6}.lst-kix_67keqmx6big9-1>li:before{content:"\0025cb   "}.lst-kix_67keqmx6big9-0>li:before{content:"\0025cf   "}.lst-kix_yl0inrclg1lv-2>li:before{content:"\0025a0   "}.lst-kix_yl0inrclg1lv-1>li:before{content:"\0025cb   "}.lst-kix_yl0inrclg1lv-0>li:before{content:"\0025cf   "}.lst-kix_tks9ztgo6jqs-4>li:before{content:"\0025cb   "}.lst-kix_tks9ztgo6jqs-2>li:before{content:"\0025a0   "}.lst-kix_tks9ztgo6jqs-6>li:before{content:"\0025cf   "}ul.lst-kix_67keqmx6big9-2{list-style-type:none}ul.lst-kix_67keqmx6big9-1{list-style-type:none}ul.lst-kix_67keqmx6big9-0{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-0.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-0 0}ul.lst-kix_67keqmx6big9-8{list-style-type:none}ul.lst-kix_67keqmx6big9-7{list-style-type:none}ol.lst-kix_6z8bqu9yyhkx-5.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-5 0}ul.lst-kix_67keqmx6big9-6{list-style-type:none}ul.lst-kix_67keqmx6big9-5{list-style-type:none}ol.lst-kix_5b8f5ucvcrgs-3.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-3 0}ul.lst-kix_67keqmx6big9-4{list-style-type:none}ul.lst-kix_67keqmx6big9-3{list-style-type:none}.lst-kix_tks9ztgo6jqs-8>li:before{content:"\0025a0   "}.lst-kix_6z8bqu9yyhkx-4>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-4,lower-latin) ". "}.lst-kix_xroe97zhbgxz-1>li:before{content:"\0025cb   "}.lst-kix_6z8bqu9yyhkx-8>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-8,lower-roman) ". "}.lst-kix_6z8bqu9yyhkx-4>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-4}.lst-kix_6z8bqu9yyhkx-6>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-6,decimal) ". "}.lst-kix_zwnr13ed57h-8>li:before{content:"\0025a0   "}ol.lst-kix_6z8bqu9yyhkx-3.start{counter-reset:lst-ctn-kix_6z8bqu9yyhkx-3 0}.lst-kix_zwnr13ed57h-2>li:before{content:"\0025a0   "}.lst-kix_zwnr13ed57h-0>li:before{content:"\0025cf   "}.lst-kix_zwnr13ed57h-4>li:before{content:"\0025cb   "}.lst-kix_5b8f5ucvcrgs-5>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-5}.lst-kix_zwnr13ed57h-6>li:before{content:"\0025cf   "}.lst-kix_wwkto3yjhp6t-7>li:before{content:"\0025cb   "}.lst-kix_wwkto3yjhp6t-3>li:before{content:"\0025cf   "}.lst-kix_wwkto3yjhp6t-5>li:before{content:"\0025a0   "}.lst-kix_5b8f5ucvcrgs-4>li{counter-increment:lst-ctn-kix_5b8f5ucvcrgs-4}ol.lst-kix_5b8f5ucvcrgs-1.start{counter-reset:lst-ctn-kix_5b8f5ucvcrgs-1 0}.lst-kix_6z8bqu9yyhkx-2>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-2,lower-roman) ". "}.lst-kix_wwkto3yjhp6t-1>li:before{content:"\0025cb   "}.lst-kix_6z8bqu9yyhkx-0>li:before{content:"" counter(lst-ctn-kix_6z8bqu9yyhkx-0,decimal) ". "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_tks9ztgo6jqs-0>li:before{content:"\0025cf   "}.lst-kix_6z8bqu9yyhkx-3>li{counter-increment:lst-ctn-kix_6z8bqu9yyhkx-3}ol{margin:0;padding:0}table td,table th{padding:0}.c21{margin-left:54pt;padding-top:0pt;text-indent:-18pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;margin-right:6pt}.c15{margin-left:54pt;padding-top:0pt;text-indent:-18pt;padding-bottom:13pt;line-height:1.15;orphans:2;widows:2;text-align:left;margin-right:6pt}.c0{margin-left:36pt;padding-top:12pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c11{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Times New Roman";font-style:normal}.c24{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c30{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:22pt;font-family:"Times New Roman";font-style:normal}.c26{padding-top:0pt;padding-bottom:14pt;line-height:1.15;orphans:2;widows:2;text-align:left;margin-right:6pt}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Times New Roman";font-style:normal}.c23{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Times New Roman";font-style:normal}.c1{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Times New Roman";font-style:normal}.c10{padding-top:0pt;padding-bottom:16pt;line-height:1.15;orphans:2;widows:2;text-align:left;margin-right:6pt}.c16{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Times New Roman";font-style:normal}.c28{padding-top:0pt;padding-bottom:10pt;line-height:1.07;orphans:2;widows:2;text-align:left;margin-right:73pt}.c25{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c18{padding-top:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left;margin-right:6pt}.c8{color:#434343;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Times New Roman";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Times New Roman";font-style:normal}.c9{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c12{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c36{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c3{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c31{padding-top:20pt;padding-bottom:6pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c32{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c5{font-size:13pt;font-family:"Times New Roman";font-weight:400}.c33{font-size:18pt;font-family:"Times New Roman";font-weight:400}.c13{font-size:13pt;font-family:"Times New Roman";font-weight:700}.c34{font-size:16pt;font-family:"Times New Roman";font-weight:700}.c35{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c20{font-size:7pt;font-family:"Times New Roman";font-weight:400}.c19{font-size:14pt;font-family:"Times New Roman";font-weight:700}.c29{font-size:12pt;font-family:"Times New Roman";font-weight:400}.c27{padding:0;margin:0}.c22{margin-left:36pt}.c14{page-break-after:avoid}.c17{height:11pt}.c37{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c35 doc-content"><h1 class="c3 c14" id="h.h7p12xw4787c"><span class="c30">Background</span></h1><p class="c3"><span class="c2">The Unified Message Push Platform was developed to address the challenges enterprises face in managing multi-channel message delivery. The platform is designed to support internal advertising, marketing, and notification management, including various message delivery channels like SMS and email. It aims to overcome the limitations of traditional push systems in terms of flexibility and scalability, providing an efficient solution for message delivery.</span></p><p class="c3 c17"><span class="c2"></span></p><h1 class="c3 c14" id="h.k7l5vvtkogej"><span class="c30">Use Cases</span></h1><p class="c3"><span class="c2">There are three main groups of intended users for the Unified Message Push Platform: internal marketing teams, other system users requiring notifications, and operations personnel. Below, we provide typical scenarios for each user group to demonstrate how they interact with the platform.</span></p><h2 class="c3 c14" id="h.1fdhaz8kf3s"><span class="c4">Marketing Teams</span></h2><p class="c3"><span class="c2">Marketing teams are responsible for creating targeted campaigns to engage users. For example, a sales manager, Alex, needs to send promotional messages to loyal customers. Alex uses the platform to create a campaign that targets customers with specific offers, ensuring messages are sent only during business hours to avoid disturbing recipients. Alex can also manage, store, and search message templates to meet different communication needs, including both marketing and transactional messages.</span></p><p class="c3"><span class="c2">Alex needs the platform to:</span></p><ul class="c27 lst-kix_xroe97zhbgxz-0 start"><li class="c0 li-bullet-0"><span class="c2">Schedule promotional messages based on user preferences.</span></li><li class="c0 li-bullet-0"><span class="c2">Use message templates to streamline communication.</span></li><li class="c0 li-bullet-0"><span class="c2">Avoid sending messages late at night to reduce disturbance.</span></li></ul><h2 class="c3 c14" id="h.6p8zug9ldytm"><span class="c4">Notification for Key Actions</span></h2><p class="c3"><span class="c2">Emma is a user of one of the company&#39;s services. After updating her profile information, she needs to receive a confirmation notification. The platform allows automatic delivery of these notifications to keep users informed about their actions. For instance, when Emma completes a transaction, she receives a real-time confirmation message.</span></p><p class="c3"><span class="c2">Emma needs the platform to:</span></p><ul class="c27 lst-kix_wwkto3yjhp6t-0 start"><li class="c0 li-bullet-0"><span class="c2">Provide instant notifications after critical actions (e.g., transactions or profile updates).</span></li><li class="c0 li-bullet-0"><span class="c2">Ensure important updates are delivered across multiple channels, such as SMS or email.</span></li></ul><h2 class="c3 c14" id="h.h3fzhphzzulq"><span class="c4">Operations Personnel</span></h2><p class="c3"><span class="c2">Liam works in operations and is responsible for monitoring message delivery statistics. He uses the platform to analyze the flow of messages and troubleshoot any issues related to message processing. For example, Liam can query how many messages were sent to a particular user today or determine the success rate of messages using a specific template.</span></p><p class="c3"><span class="c2">Liam needs the platform to:</span></p><ul class="c27 lst-kix_45dr24g7kxmp-0 start"><li class="c0 li-bullet-0"><span class="c2">Monitor end-to-end message flow and ensure successful delivery.</span></li><li class="c0 li-bullet-0"><span class="c2">Query message statistics to identify patterns or issues.</span></li><li class="c0 li-bullet-0"><span class="c2">Track the lifecycle of each message, including successful delivery or failure.</span></li></ul><p class="c3"><span class="c2">The Unified Message Push Platform aims to meet the needs of diverse users, from marketers seeking to engage customers, to end-users expecting timely updates, to operations staff ensuring system reliability and message integrity. By providing tailored features and ensuring ease of use, the platform serves as an effective solution for enterprise messaging need</span></p><p class="c3 c17"><span class="c2"></span></p><h1 class="c3 c14" id="h.vcz958rtu1zs"><span class="c30">Requirements</span></h1><h2 class="c3 c14" id="h.cm2jsv6zm5xt"><span class="c33">Functional Requirements</span></h2><ul class="c27 lst-kix_qmsy8kjx5o6k-0 start"><li class="c0 li-bullet-0"><span class="c13">FR1- Send and Batch Send Messages : </span><span class="c5">The system should support both single and batch message sending requests.Ensuring performance and reliability during high-volume operations.</span></li><li class="c0 li-bullet-0"><span class="c13">FR2 - Real-Time and Scheduled Message Delivery</span><span class="c5">:</span><span class="c2">&nbsp;The platform must support both real-time and scheduled message delivery across various channels, such as SMS, email, and instant messaging.</span></li><li class="c0 li-bullet-0"><span class="c13">FR3 - Message Deduplication</span><span class="c5">: </span><span class="c2">To avoid sending duplicate messages to users, the system should implement deduplication mechanisms that track recent messages and prevent redundancy. </span></li><li class="c0 li-bullet-0"><span class="c13">FR4 - Multi-Channel Support</span><span class="c2">: The system should support multiple channels, such as SMS, email, and instant messaging, for message delivery.</span></li><li class="c0 li-bullet-0"><span class="c13">FR5 - Rate Limiting and Traffic Control</span><span class="c2">: The platform should enforce rate limits per channel to protect downstream providers from overload and ensure compliance with external rate limitations.</span></li><li class="c0 li-bullet-0"><span class="c13">FR6 - Night-Time Blocking and Next-Day Sending</span><span class="c2">: The system should allow configuration for blocking message delivery during specific hours (e.g., night) and deferring those messages until the next scheduled time, such as the following morning. </span></li><li class="c0 li-bullet-0"><span class="c13">FR7 - Scheduled Task Operations Instrumentation</span><span class="c2">: The system should support essential scheduled task operations by enabling the creation of new tasks, pausing tasks to temporarily halt execution, deleting tasks to permanently remove them, and stopping tasks for editing.</span></li><li class="c0 li-bullet-0"><span class="c13">FR8 - Data Aggregation and Delivery Status Query: </span><span class="c5">The system should aggregate and summarize key data points to provide a comprehensive view of message activities. It should also support querying of message delivery status, enabling effective tracking and reporting on the success and distribution of sent messages.</span></li><li class="c0 li-bullet-0"><span class="c13">FR9 - Critical Path Log Instrumentation: </span><span class="c2">The system should insert log markers at key points in the processing layer to capture four main statuses: message discarded, message filtered by a whitelist, message deduplicated, and message successfully delivered. Each log entry should have a corresponding code.</span></li><li class="c0 li-bullet-0"><span class="c13">FR10 - Full Lifecycle Tracking via Business ID: </span><span class="c2">The system should generate a unique business ID based on the template type, template ID, and current date. This business ID should persist through the entire lifecycle of the message, enabling complete end-to-end link tracking of individual messages.</span></li><li class="c0 li-bullet-0"><span class="c13">FR11 - Flink-Based Log Cleaning: </span><span class="c2">The system should utilize Flink to perform real-time log cleaning, organizing data by different dimensions. The cleaned data should be used to improve the efficiency of issue resolution and provide real-time analytics.</span></li></ul><h2 class="c3 c14" id="h.30baud7d1lm3"><span class="c33">Non-Functional Requirements</span></h2><ul class="c27 lst-kix_tks9ztgo6jqs-0 start"><li class="c0 li-bullet-0"><span class="c13">NFR1 - High Availability: </span><span class="c2">The system should ensure high availability, with minimal downtime, to meet business-critical messaging needs.</span></li><li class="c0 li-bullet-0"><span class="c13">NFR2 - Scalability: </span><span class="c2">The system should be able to handle large volumes of messages across multiple channels without performance degradation.</span></li></ul><ul class="c27 lst-kix_yl0inrclg1lv-0 start"><li class="c0 li-bullet-0"><span class="c13">NFR3 - Low Latency: </span><span class="c2">The system should process messages with minimal latency, providing real-time responses for API requests and quick message delivery.</span></li></ul><h1 class="c3 c14" id="h.n8c3maoupvpa"><span class="c30">High-Level Design</span></h1><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 390.67px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 390.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c2">The system follows a distributed architecture consisting of key components: Message Access Layer, Message Processing Layer, Task Scheduling Layer, and Backend Management Layer. These components collaborate to provide scalability, reliability, and efficient message handling in high-concurrency scenarios. The overall design uses a producer-consumer model.</span></p><p class="c3 c17"><span class="c2"></span></p><h1 class="c3 c14" id="h.ryst3wd2wxyp"><span class="c30">Modules</span></h1><h2 class="c3 c14" id="h.izsn79uxnugr"><span class="c4">Module 1: Message Access Layer</span></h2><p class="c3"><span class="c2">The Message Access Layer is responsible for receiving external requests and performing the necessary preprocessing and validation of input data. It offers both single and batch message sending interfaces to accommodate different needs, including the ability to handle large volumes of recipients.</span></p><h3 class="c3 c14" id="h.ho5z2kq067xv"><span class="c34">Design Element - DE-1</span><span class="c16">: </span></h3><p class="c3"><span class="c2">The module includes interface designs for both single and batch message sending</span></p><p class="c3"><span class="c2">In the SendRequest, parameters include messageTemplateId to fetch the message template and messageParam for specific business message details. The module assembles these business parameters into a message ready for sending by performing a series of operations, such as: pre-checks to ensure messageTemplateId is valid, recipient details are provided, and message parameters are legal. Parameter assembly by fetching the message template content using messageTemplateId and substituting placeholders with the relevant business parameters.</span></p><p class="c3"><span class="c2">The responsibility chain pattern is employed to modularize these processing steps, improving maintainability and enabling the addition of new validation or transformation logic without impacting the core flow</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 272.00px;"><img alt="" src="images/image6.png" style="width: 624.00px; height: 272.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c17"><span class="c2"></span></p><h2 class="c3 c14" id="h.tzykypw89qaz"><span class="c7">Module 2: Message Processing Layer</span></h2><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 365.33px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 365.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c5">Responsibilities: </span><span class="c24">The Message Processing Layer, referred to as the Handler, is central to the Message Push Platform. This layer handles the collection, analysis, processing and delivery of messages across multiple channels such as SMS, email and instant messaging. It is optimized for high convergence, low latency and flexible load management, and is tailored to platform requirements for high performance and user-friendly design. The process flow is as follows:</span></p><p class="c21"><span class="c24">1. &nbsp; The handler sends a request to the SMS provider&#39;s API to send the message.</span></p><p class="c21"><span class="c24">2. &nbsp; The SMS returns a response that the host writes to MySQL for tracking and reference.</span></p><p class="c21"><span class="c24">3. &nbsp; Information about each API call, including dispatch status and other response data, is stored in MySQL</span></p><p class="c21"><span class="c24">4. &nbsp; The handler queries the SMS provider to obtain delivery receipts or updates on sent messages.</span></p><p class="c21"><span class="c29">5.</span><span class="c20">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c24">These updates are also stored in MySQL, so that the message delivery status is properly recorded.</span></p><p class="c15"><span class="c29">6.</span><span class="c20">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c29">Data contained in MySQL can be queried for reporting purposes, which allows monitoring of message location and delivery results. </span></p><h3 class="c3 c14" id="h.3odib92zlcmi"><span class="c9">Design Element - DE-2: </span></h3><p class="c36"><span class="c5">The Message Processing Layer, referred to as the Handler, is designed with several critical features to ensure efficient, reliable, and user-friendly message processing across multiple channels. Key features of this module include deduplication, rate limiting, night-time blocking and next-day sending, and thread pool management with graceful shutdown. These features enable the platform to maintain high performance while protecting user experience and system resources.</span></p><p class="c18"><span class="c11">Deduplication</span></p><p class="c3"><span class="c2">Deduplication within the handler is a critical mechanism to prevent redundant messages from reaching users. This not only improves the user experience and reduces user frustration, but also saves system resources by preventing duplicate message processing and delivery. Duplicate messages can occur for a number of reasons, such as incorrect API calls, the situation that the handler restarts but the offsets are not committed to Kafka. To solve these problems, the download process relies on generating unique business keys for each message and storing them in Redis for tracking and efficient management.</span></p><p class="c3"><span class="c2">For each message, a unique business key is generated based on the unique message attributes, typically (user ID + channel) appended to MD5. This business key acts as a consistent and dense identifier, allowing the system to directly check if a similar message has been processed. Redis is the ideal storage solution for these keys due to its high speed and internal memory capacity, its ability to handle high concurrency and support for atomic operations using Lua script. Keys in Redis expire depending on the withdrawal type, for instance, temporary expiration for sensitive withdrawals, daily expiration for small checks. Redis checks if the generated key exists or if the number exceeds a defined threshold, for example five messages per day per user. If the count is greater than or equal to the threshold, the message is ignored. If the threshold is not reached, the count is incremented, and the message goes to the next step. In order to organize atomic operations and avoid bottlenecks in this large environment, LUA scripts in Redis can search and calculate the main parts of atomic operations and ensure accuracy and consistency. of the transfer process.</span></p><p class="c3"><span class="c5">The download workflow in Redis starts by initializing a new key for each unique message and assigns an expiration time based on the download type. For each duplicate check, Redis performs an atomic check increment operation using a LUA script, which allows the checker to verify and update the count in a single transaction. This avoids problems that may arise from concurrent operations. Redis automatically expires keys after a certain time, saving memory and optimizing resource usage. With this retargeting strategy, the platform can handle large volumes of traffic and prevent users from receiving duplicate messages.</span></p><p class="c18"><span class="c19">Rate Limiting</span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 374.67px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 374.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c23">&nbsp;</span></p><p class="c3"><span class="c2">Another important function of the handler is throttling, which protects the underlying systems from overload and ensures compliance with speed limits set by external providers. Each channel&#39;s rate limit is configured individually, with Guava&#39;s Rate Limiter applying a single rate limit per channel. Configuration values &#8203;&#8203;are stored in Apollo, a distributed configuration system that allows real-time configuration without reuse. This setup allows dynamic route changes for each channel, allowing the platform to adapt to changes in traffic and downstream needs without affecting the user experience.</span></p><p class="c3"><span class="c2">In addition to closing rates, the handler has other ways to divert non-customer traffic to increase error recognition. In scenarios where a primary provider becomes unavailable or experiences issues, the system can automatically switch to an alternative provider, maintaining continuity of service and ensuring message delivery remains uninterrupted. This failover capability is particularly valuable for maintaining service quality and reliability, even in the face of provider disruptions. Furthermore, the handler actively monitors traffic flow, user counts, and QPS (queries per second) to dynamically allocate traffic across available providers based on current capacity, availability, and performance metrics.</span></p><p class="c3"><span class="c5">With these dynamic rate adjustments and provider switching, the handler achieves a balanced, resilient setup that can handle fluctuations in demand while maintaining system stability. The system continuously monitors and allocates traffic in real-time, effectively managing load distribution, protecting downstream systems from overload, and ensuring a seamless user experience.</span></p><p class="c18"><span class="c19">Night-time Blocking and Next-day Sending</span></p><p class="c26"><span class="c5">To minimize user disruptions, the handler includes a night-time blocking mechanism that defers messages intended for delivery at night until the following morning. Messages marked for nightly delivery are stored in the Redis directory, while a distributed scheduling framework such as xxl-job starts a scheduler job to process these messages at 9: 00 AM the next day. Delayed messages are retrieved from Redis and routed to the appropriate routes to avoid disruption to users during peak hours and ensure timely delivery. In this way, the platform can meet the expectations of users by ensuring uninterrupted transfer times when sending messages.</span></p><p class="c18"><span class="c11">Thread Pool Management and Graceful Shutdown</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 341.33px;"><img alt="" src="images/image12.png" style="width: 624.00px; height: 341.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c5">The handler uses dedicated thread pools for each groupId to optimize message consumption and processing. By assigning a thread pool to each channel, resources are allocated efficiently, and the risk of resource problems is reduced. Each thread pool can be configured to meet the unique processing needs of the associated channel, for better load management. When an application receives a stop signal, the efficient stop function ensures that each thread pool completes its current tasks before stopping altogether. This prevents a smooth transition and maintains system continuity by allowing ongoing tasks to be completed. By implementing these thread springs and closing mechanisms, the system achieves efficient processing while ensuring safe and controlled closing, even in harsh environments. </span></p><p class="c3"><span class="c1">Module 3: Task Scheduling Layer</span></p><p class="c3"><span class="c2">This module is primarily responsible for managing scheduled tasks. Our system design is shown in the diagram below.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 390.00px; height: 454.11px;"><img alt="" src="images/image8.png" style="width: 390.00px; height: 454.11px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c17"><span class="c2"></span></p><p class="c3"><span class="c2">The flow of our scheduled tasks is as follows:</span></p><p class="c3"><span class="c2">First, the system first initiates the start process by receiving the task ID.</span></p><p class="c3"><span class="c2">After retrieving the relevant information, it dynamically creates or updates the scheduled task based on the task scenario, generates the execution details, and retrieves the task ID.</span></p><p class="c3"><span class="c2">It then starts the task to complete the process. During this process, the system obtains the cron expression, constructs the task information, retrieves the task group ID, and assembles the task address and request parameters, finalizing the task registration.</span></p><p class="c3"><span class="c13">Design Element - DE-3</span><span class="c2">: </span></p><p class="c3"><span class="c19">The distributed scheduling system</span></p><p class="c3"><span class="c2">As shown in the image below, our distributed scheduling system is composed of three abstract core components: the scheduler, the executor, and the task. The scheduler is responsible for arranging and triggering tasks, determining when to start them based on a set schedule. The executor is tasked with executing the specific tasks and handling the business logic associated with them. The task itself is the individual work unit arranged by the scheduler and executed by the executor.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 549.50px; height: 349.60px;"><img alt="" src="images/image7.png" style="width: 549.50px; height: 349.60px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c17"><span class="c1"></span></p><p class="c3 c17"><span class="c1"></span></p><p class="c3"><span class="c1">Module 4: Backend Management Layer</span></p><p class="c3"><span class="c2">On the backend management level, our business requirement aims to provide business users with a fully functional and user-friendly management interface.</span></p><p class="c3"><span class="c2">The backend functionality of our system is designed as follows:</span></p><ol class="c27 lst-kix_5b8f5ucvcrgs-0 start" start="1"><li class="c0 li-bullet-0"><span class="c2">Our system enables template customization by configuring template names, business information, channels, and other parameters to tailor tasks as needed.</span></li><li class="c0 li-bullet-0"><span class="c2">It includes a message management interface for testing, viewing, editing, copying, and deleting all message tasks.</span></li><li class="c0 li-bullet-0"><span class="c2">The data management module monitors message reception by template ID and offers user ID search functionality.</span></li><li class="c0 li-bullet-0"><span class="c2">Additionally, our system tracks and analyzes message delivery status.</span></li></ol><p class="c3"><span class="c2">Our design adheres to a clear separation of front-end and back-end APIs, ensuring seamless integration and communication between the client and server. </span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 148.00px;"><img alt="" src="images/image11.png" style="width: 624.00px; height: 148.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c13">Design Element - DE-4</span><span class="c2">: </span></p><p class="c3"><span class="c2">The amis low-code front-end framework for its exceptional development efficiency, enabling the rapid construction of complex pages through streamlined configuration, thus significantly reducing development cycles and labor costs. The amis framework is particularly well-aligned with our operational needs, supporting core functionalities such as CRUD operations and data visualization with minimal setup. So we use the amis &nbsp;framework to develop our web.</span></p><p class="c3"><span class="c2">For backend api development, we implemented the Spring Boot framework, which abstracts away complex configurations and allows developers to concentrate on business logic execution. Integrated with Spring Data JPA for ORM capabilities and MySQL as the relational database, this architecture optimizes database interactions and facilitates robust data management, including template handling and SMS delivery tracking. </span></p><h2 class="c3 c14" id="h.qrkubl1zwhst"><span class="c7">Module 5: Stream Processing Module</span></h2><p class="c3"><span class="c2">This module primarily handles the processing of message task logs.</span></p><p class="c3"><span class="c2">As shown in the architecture diagram, in the access layer (Diagram 1), the API will provide feedback on the success or failure of asynchronous requests made by the task client, and the client will receive immediate information on whether its input has been accepted by the API. This step does not require log recording.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 344.39px; height: 171.50px;"><img alt="" src="images/image4.png" style="width: 344.39px; height: 171.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 1 Project Design Access Layer</span></p><p class="c3"><span class="c2">Our focus, therefore, shifts to the message processing layer (Diagram 2). In this layer, from the Message Queue to the handler and finally to different delivery channels, there is no direct feedback mechanism. Furthermore, the processing layer involves many platform-level filtering rules, most of which are user-centric (targeting user IDs, the receivers) rather than message templates. In this process, it becomes crucial to record the execution details for each user within each message template.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 418.77px; height: 245.10px;"><img alt="" src="images/image13.png" style="width: 418.77px; height: 245.10px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 2 Project Design Processing Layer</span></p><p class="c3"><span class="c2">In the architecture design, we primarily considered two background scenarios that are most likely to cause issues:</span></p><p class="c3"><span class="c2">Background 1: Locating and Troubleshooting Issues</span></p><p class="c3"><span class="c2">If a customer reports that a user did not receive an SMS, the issue usually occurs during this processing phase (e.g., due to deduplication or API call failures).</span></p><p class="c3"><span class="c2">Background 2: Analyzing Overall Link Data for Template Execution</span></p><p class="c3"><span class="c2">This involves metrics like the daily sending volume of a message template, the filtering volume by each rule, the successful delivery volume, and the click-through volume of the message. Apart from the click-through data, all other data originates from the processing layer.</span></p><h3 class="c3 c14" id="h.v0vd8tnrhdyv"><span class="c37">Design Element - DE-5</span><span class="c9">: </span></h3><p class="c3"><span class="c25">Log Instrumentation</span></p><p class="c3"><span class="c2">Based on the two scenarios above, we defined log instrumentation rules to insert corresponding markers at critical points in the process.</span></p><p class="c3"><span class="c2">When categorizing information handled by the processing layer, there are four main types (Diagram 3):</span></p><p class="c3"><span class="c2">1. Message discarded,</span></p><p class="c3"><span class="c2">2. Message filtered by a whitelist,</span></p><p class="c3"><span class="c2">3. Message deduplicated (both content deduplication and operational rule deduplication),</span></p><p class="c3"><span class="c5">4. Message successfully delivered.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 455.00px; height: 253.19px;"><img alt="" src="images/image14.png" style="width: 455.00px; height: 253.19px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 3 Process Types</span></p><p class="c3"><span class="c2">For each category, different markers were defined, such as RECEIVE (code: 10), DISCARD (code: 20), and corresponding marker content like &quot;message received successfully&quot; or &quot;message discarded.&quot;</span></p><p class="c3"><span class="c2">After adding markers at critical points, the core logic of logging in this project is as follows:</span></p><p class="c3"><span class="c2">Logic 1: Logging Original Information at the Entry Point</span></p><p class="c3"><span class="c2">At entry points (including the API&#39;s entry and when Kafka messages are first consumed), it is necessary to log the original information. Having the original information helps in locating and troubleshooting issues, at least aiding in reproducing them.</span></p><p class="c3"><span class="c2">Logic 2: Consistent Format for Processing Logs</span></p><p class="c3"><span class="c2">During processing, a specific identifier is used to mark the processing status (e.g., 10 for successful Kafka consumption, 20 for message discarded). The log format remains consistent, facilitating unified cleaning of the log data later.</span></p><p class="c3"><span class="c2">The logging process is handled by creating a `LogUtils` class (Diagram 4), which uses the `@OperationLog` annotation to generate method aspect logs, record the current object information, and log the markers.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 351.50px; height: 248.16px;"><img alt="" src="images/image5.png" style="width: 351.50px; height: 248.16px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 4 LogUtils Class design</span></p><p class="c3"><span class="c2">To achieve link tracking, i.e., tracing which user clicked on which template message, it is necessary to generate a **unique business ID** based on the template type, template ID, and current date. This business ID is then used to trace back to the source, following the message throughout its entire lifecycle.</span></p><p class="c3"><span class="c25">ELK Framework Implementation</span></p><p class="c3"><span class="c2">At this point, we have written link information to the local server. However, since application servers usually run in clusters, log data is distributed across different machines, and troubleshooting requires logging into each server separately.</span></p><p class="c3"><span class="c2">Here, we use a lightweight ELK framework, Graylog. It is straightforward to use at the access layer; many Graylog instances send data directly via UDP to the server, without needing an agent to collect logs on each machine (as shown in Diagram 5). It is used to view logs and monitor business alerts.</span></p><p class="c6"><span>&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 367.43px; height: 374.55px;"><img alt="" src="images/image10.png" style="width: 367.43px; height: 374.55px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 5 GrayLog operating principle</span></p><p class="c3"><span class="c25">Flink Log Cleaning</span></p><p class="c3"><span class="c2">In addition, we need to clean up the log content and data to make it easier for business users and system maintainers to use the message-pushing platform &quot;Austin.&quot; For this, we use the stream processing platform Flink.</span></p><p class="c3"><span class="c2">Earlier in the process, we logged the data by inserting markers, but no processing was done. Flink can clean this data (e.g., based on the sender dimension, the template message dimension, etc.). The cleaned data can then be returned to the interface for display or troubleshooting, greatly improving the efficiency of problem resolution and business use (Diagram 6). This implementation aggregates data to Redis in real-time, divided into two dimensions: user and message template.</span></p><p class="c6"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 491.50px; height: 235.51px;"><img alt="" src="images/image9.png" style="width: 491.50px; height: 235.51px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c6"><span class="c12">Diagram 6 Flink operating principle</span></p><p class="c3"><span class="c2">Through Flink operations, the processed log information can be returned to the front-end, enabling front-end functionality. Users can achieve full link tracking by entering a template ID or user ID, i.e., the business ID.</span></p><p class="c3"><span class="c2">Finally, with the integration of Flink and Hive, a data warehouse is built, leveraging Hive Catalog&rsquo;s interface to write to and read from Hive.</span></p><p class="c32 c17"><span class="c12"></span></p><p class="c3 c17 c22"><span class="c2"></span></p><p class="c3 c17"><span class="c1"></span></p><h1 class="c3 c14" id="h.xgdwp1cj9e5o"><span class="c30">Design Rationale</span></h1><p class="c3"><span class="c13">Chain Processing (FR3, DE-2)</span><span class="c5">: The chain of responsibility pattern is used to modularize the processing steps, allowing the system to add new message-handling logic without affecting existing handlers. This approach reduces maintenance complexity and provides consistent error handling for new features.</span></p><p class="c17 c32"><span class="c12"></span></p><p class="c3"><span class="c13">Asynchronous Decoupling (NFR2, DE-2)</span><span class="c2">: An asynchronous processing approach decouples message sending from user-facing services to reduce timeout risks and increase overall system throughput. By sending messages to the MQ after receiving them through the API, the system mitigates the risks associated with direct calls to downstream services.</span></p><p class="c3 c17"><span class="c2"></span></p><p class="c3"><span class="c13">Data Isolation (FR4, DE-2, DE-5)</span><span class="c2">: Kafka is used to isolate different message channels and types, ensuring that issues in a single channel do not impact the overall system&rsquo;s performance. Consumer groups are established to separate traffic based on channel and message type.</span></p><p class="c3"><span class="c2">In addition, Flink is used to perform log cleaning and real-time data aggregation, further enhancing data isolation and processing efficiency. Flink is deployed to clean and aggregate log data from various message channels, ensuring that data from each channel is processed independently. This isolation not only prevents data contamination across channels but also supports granular, dimension-based processing (e.g., by sender or template). Aggregated data is sent to Redis for further analysis, maintaining isolation across user and template dimensions.</span></p><p class="c3"><span class="c13">Traffic Control (NFR3, DE-1)</span><span class="c2">: Managing traffic to downstream systems, particularly those with low QPS, is critical for maintaining system stability under high concurrency. Throttling mechanisms and seamless provider switching are implemented to maintain efficiency and reliability.</span></p><p class="c3 c17"><span class="c2"></span></p><h1 class="c14 c31" id="h.9lmnixhbs3zy"><span class="c30">Conclusion</span></h1></body></html>
